{"version":3,"sources":["webpack:///./src/views/Settings/Setting/Email.vue?1923","webpack:///src/views/Settings/Setting/Email.vue","webpack:///./src/views/Settings/Setting/Email.vue?a092","webpack:///./src/views/Settings/Setting/Email.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","xs12","sm8","offset-sm2","md4","offset-md4","outline","color","colorAlert","isThereNewApp","fail","icon","iconAlert","value","_v","_s","serverMsg","_l","error","msg","_e","primary-title","staticClass","spinner","currentEmail","size","width","label","required","error-messages","emailErrors","on","input","$event","$v","newEmail","$touch","blur","keyup","_k","keyCode","key","editEmail","model","callback","$$v","expression","type","passwordErrors","append-icon","e1","password","click:append","flat","disabled","nativeOn","click","staticRenderFns","Emailvue_type_script_lang_js_","name","validations","validators","email","minLength","Object","props","components","Spinner","data","errors","passErr1","passErr2","emailErr1","emailErr2","methods","clearForm","$reset","getEmail","_this","$store","dispatch","then","catch","_this2","$invalid","response","message","computed","state","Settings","$dirty","push","created","commit","isAuthenticated","destroyed","Setting_Emailvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d21ef04.fcc2710a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{attrs:{\"xs12\":\"\",\"sm8\":\"\",\"offset-sm2\":\"\",\"md4\":\"\",\"offset-md4\":\"\"}},[_c('v-card',[(_vm.serverMsg)?_c('v-container',[_c('v-layout',[(_vm.serverMsg)?_c('v-alert',{attrs:{\"outline\":\"\",\"color\":_vm.colorAlert(_vm.isThereNewApp, _vm.fail),\"icon\":_vm.iconAlert(_vm.isThereNewApp, _vm.fail),\"value\":true}},[_vm._v(\"\\n          \"+_vm._s(_vm.serverMsg)+\"\\n          \"),_vm._l((_vm.errors),function(error){return _c('ul',[_c('li',[_vm._v(_vm._s(error.msg))])])})],2):_vm._e()],1)],1):_vm._e(),_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('div',[_c('div',{staticClass:\"title grey--text text--darken-2\"},[_vm._v(\"Current email:\")]),(!_vm.spinner)?_c('div',{staticClass:\"subheading grey--text text--darken-2 mt-2\"},[_vm._v(\"\\n          \"+_vm._s(_vm.currentEmail)+\"\\n        \")]):_vm._e()])]),(_vm.spinner)?_c('spinner',{attrs:{\"size\":_vm.size,\"width\":_vm.width}}):_vm._e(),(!_vm.spinner)?_c('form',{staticClass:\"ml-2 mr-2\"},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"New email\",\"color\":\"purple lighten-1\",\"required\":\"\",\"error-messages\":_vm.emailErrors},on:{\"input\":function($event){_vm.$v.newEmail.$touch()},\"blur\":function($event){_vm.$v.newEmail.$touch()},\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.editEmail($event)}},model:{value:(_vm.newEmail),callback:function ($$v) {_vm.newEmail=$$v},expression:\"newEmail\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Password\",\"color\":\"purple lighten-1\",\"type\":\"password\",\"required\":\"\",\"error-messages\":_vm.passwordErrors,\"append-icon\":_vm.e1 ? 'visibility' : 'visibility_off',\"type\":_vm.e1 ? 'password' : 'text'},on:{\"input\":function($event){_vm.$v.password.$touch()},\"blur\":function($event){_vm.$v.password.$touch()},\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.editEmail($event)},\"click:append\":function () { return (_vm.e1 = !_vm.e1); }},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1):_vm._e(),_c('v-card-actions',[_c('v-btn',{attrs:{\"flat\":\"\",\"outline\":\"\",\"color\":\"purple lighten-1\",\"disabled\":_vm.spinner},nativeOn:{\"click\":function($event){return _vm.editEmail($event)}}},[_vm._v(\"\\n        Save\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-flex xs12 sm8\n          offset-sm2\n          md4\n          offset-md4>\n    <v-card>\n      <v-container v-if=\"serverMsg\">\n        <v-layout>\n          <v-alert v-if=\"serverMsg\"\n                   outline\n                   :color=\"colorAlert(isThereNewApp, fail)\"\n                   :icon=\"iconAlert(isThereNewApp, fail)\"\n                   :value=\"true\">\n            {{ serverMsg }}\n            <ul v-for=\"error in errors\">\n              <li>{{ error.msg }}</li>\n            </ul>\n          </v-alert>\n        </v-layout>\n      </v-container>\n      <v-card-title primary-title>\n        <div>\n          <div class=\"title grey--text text--darken-2\">Current email:</div>\n          <div v-if=\"!spinner\"\n               class=\"subheading grey--text text--darken-2 mt-2\">\n            {{ currentEmail }}\n          </div>\n        </div>\n      </v-card-title>\n      <spinner v-if=\"spinner\"\n               :size=\"size\"\n               :width=\"width\">\n      </spinner>\n      <form v-if=\"!spinner\"\n           class=\"ml-2 mr-2\">\n        <v-flex xs12>\n          <v-text-field label=\"New email\"\n                        color=\"purple lighten-1\"\n                        required\n                        v-model=\"newEmail\"\n                        :error-messages=\"emailErrors\"\n                        @input=\"$v.newEmail.$touch()\"\n                        @blur=\"$v.newEmail.$touch()\"\n                        @keyup.enter=\"editEmail\">\n          </v-text-field>\n        </v-flex>\n        <v-flex xs12>\n          <v-text-field label=\"Password\"\n                        color=\"purple lighten-1\"\n                        type=\"password\"\n                        required\n                        v-model=\"password\"\n                        :error-messages=\"passwordErrors\"\n                        @input=\"$v.password.$touch()\"\n                        @blur=\"$v.password.$touch()\"\n                        @keyup.enter=\"editEmail\"\n                        :append-icon=\"e1 ? 'visibility' : 'visibility_off'\"\n                        @click:append=\"() => (e1 = !e1)\"\n                        :type=\"e1 ? 'password' : 'text'\">\n          </v-text-field>\n        </v-flex>\n      </form>\n      <v-card-actions>\n        <v-btn flat\n               outline\n               color=\"purple lighten-1\"\n               :disabled=\"spinner\"\n               @click.native=\"editEmail\">\n          Save\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-flex>\n</template>\n\n<script>\nimport { required, email, minLength } from \"vuelidate/lib/validators\";\nimport Spinner from \"../../../components/Spinners/Spinner\";\n\nexport default {\n  name: \"Email\",\n  validations: {\n    newEmail: { required, email },\n    password: { required, minLength: minLength(8) }\n  },\n  props: [\"isAuthenticated\", \"isThereNewApp\", \"colorAlert\", \"iconAlert\"],\n  components: {\n    spinner: Spinner\n  },\n  data() {\n    return {\n      size: 60,\n      width: 2,\n      e1: true,\n      fail: false,\n      serverMsg: null,\n      errors: [],\n      password: \"\",\n      newEmail: \"\",\n      passErr1: \"Password is required\",\n      passErr2: \"Password must be at least 8 characters\",\n      emailErr1: \"Must be a valid email\",\n      emailErr2: \"Email is required \"\n    };\n  },\n  methods: {\n    clearForm() {\n      this.$v.$reset();\n      this.newEmail = \"\";\n      this.password = \"\";\n    },\n    getEmail() {\n      this.serverMsg = \"\";\n      this.fail = false;\n\n      this.$store\n        .dispatch(\"Settings/getEmail\")\n        .then(() => {\n          this.clearForm();\n        })\n        .catch(() => {\n          this.clearForm();\n        });\n    },\n    editEmail() {\n      this.$v.$touch();\n\n      if (this.$v.$invalid) {\n        return;\n      }\n\n      this.serverMsg = null;\n      this.errors = [];\n      this.$store\n        .dispatch(\"Settings/editEmail\", {\n          password: this.password,\n          newEmail: this.newEmail\n        })\n        .then(response => {\n          this.clearForm();\n          this.serverMsg = response.data.message;\n          this.fail = false;\n        })\n        .catch(error => {\n          this.clearForm();\n          this.fail = true;\n          this.serverMsg = error.response.data.message;\n          this.errors = error.response.data.errors;\n        });\n    }\n  },\n  computed: {\n    currentEmail() {\n      return this.$store.state.Settings.email;\n    },\n    spinner() {\n      return this.$store.state.Settings.spinner;\n    },\n    passwordErrors() {\n      const errors = [];\n      if (!this.$v.password.$dirty) return errors;\n      !this.$v.password.required && errors.push(this.passErr1);\n      !this.$v.password.minLength && errors.push(this.passErr2);\n\n      return errors;\n    },\n    emailErrors() {\n      const errors = [];\n      if (!this.$v.newEmail.$dirty) return errors;\n      !this.$v.newEmail.email && errors.push(this.emailErr1);\n      !this.$v.newEmail.required && errors.push(this.emailErr2);\n\n      return errors;\n    }\n  },\n  created() {\n    this.$store.commit(\"error500Data\", false);\n\n    if (this.isAuthenticated) {\n      this.getEmail();\n    }\n\n    if (!this.isAuthenticated) {\n      this.$store.commit(\"dialogPayload\", true);\n    }\n  },\n  destroyed() {\n    this.$store.commit(\"Settings/emailData\", null);\n    this.$store.commit(\"error500Data\", false);\n  }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Email.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Email.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Email.vue?vue&type=template&id=a22447c0&\"\nimport script from \"./Email.vue?vue&type=script&lang=js&\"\nexport * from \"./Email.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Email.vue\"\nexport default component.exports"],"sourceRoot":""}