(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ef04"],{d860:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":"",md4:"","offset-md4":""}},[r("v-card",[e.serverMsg?r("v-container",[r("v-layout",[e.serverMsg?r("v-alert",{attrs:{outline:"",color:e.colorAlert(e.isThereNewApp,e.fail),icon:e.iconAlert(e.isThereNewApp,e.fail),value:!0}},[e._v("\n          "+e._s(e.serverMsg)+"\n          "),e._l(e.errors,function(t){return r("ul",[r("li",[e._v(e._s(t.msg))])])})],2):e._e()],1)],1):e._e(),r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("div",{staticClass:"title grey--text text--darken-2"},[e._v("Current email:")]),e.spinner?e._e():r("div",{staticClass:"subheading grey--text text--darken-2 mt-2"},[e._v("\n          "+e._s(e.currentEmail)+"\n        ")])])]),e.spinner?r("spinner",{attrs:{size:e.size,width:e.width}}):e._e(),e.spinner?e._e():r("form",{staticClass:"ml-2 mr-2"},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"New email",color:"purple lighten-1",required:"","error-messages":e.emailErrors},on:{input:function(t){e.$v.newEmail.$touch()},blur:function(t){e.$v.newEmail.$touch()},keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.editEmail(t):null}},model:{value:e.newEmail,callback:function(t){e.newEmail=t},expression:"newEmail"}})],1),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Password",color:"purple lighten-1",type:"password",required:"","error-messages":e.passwordErrors,"append-icon":e.e1?"visibility":"visibility_off",type:e.e1?"password":"text"},on:{input:function(t){e.$v.password.$touch()},blur:function(t){e.$v.password.$touch()},keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.editEmail(t):null},"click:append":function(){return e.e1=!e.e1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),r("v-card-actions",[r("v-btn",{attrs:{flat:"",outline:"",color:"purple lighten-1",disabled:e.spinner},nativeOn:{click:function(t){return e.editEmail(t)}}},[e._v("\n        Save\n      ")])],1)],1)],1)},s=[],n=r("b5ae"),a=r("182f"),o={name:"Email",validations:{newEmail:{required:n["required"],email:n["email"]},password:{required:n["required"],minLength:Object(n["minLength"])(8)}},props:["isAuthenticated","isThereNewApp","colorAlert","iconAlert"],components:{spinner:a["a"]},data:function(){return{size:60,width:2,e1:!0,fail:!1,serverMsg:null,errors:[],password:"",newEmail:"",passErr1:"Password is required",passErr2:"Password must be at least 8 characters",emailErr1:"Must be a valid email",emailErr2:"Email is required "}},methods:{clearForm:function(){this.$v.$reset(),this.newEmail="",this.password=""},getEmail:function(){var e=this;this.serverMsg="",this.fail=!1,this.$store.dispatch("Settings/getEmail").then(function(){e.clearForm()}).catch(function(){e.clearForm()})},editEmail:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(this.serverMsg=null,this.errors=[],this.$store.dispatch("Settings/editEmail",{password:this.password,newEmail:this.newEmail}).then(function(t){e.clearForm(),e.serverMsg=t.data.message,e.fail=!1}).catch(function(t){e.clearForm(),e.fail=!0,e.serverMsg=t.response.data.message,e.errors=t.response.data.errors}))}},computed:{currentEmail:function(){return this.$store.state.Settings.email},spinner:function(){return this.$store.state.Settings.spinner},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push(this.passErr1),!this.$v.password.minLength&&e.push(this.passErr2),e):e},emailErrors:function(){var e=[];return this.$v.newEmail.$dirty?(!this.$v.newEmail.email&&e.push(this.emailErr1),!this.$v.newEmail.required&&e.push(this.emailErr2),e):e}},created:function(){this.$store.commit("error500Data",!1),this.isAuthenticated&&this.getEmail(),this.isAuthenticated||this.$store.commit("dialogPayload",!0)},destroyed:function(){this.$store.commit("Settings/emailData",null),this.$store.commit("error500Data",!1)}},l=o,u=r("2877"),c=Object(u["a"])(l,i,s,!1,null,null,null);c.options.__file="Email.vue";t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d21ef04.fcc2710a.js.map